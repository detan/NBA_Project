{
    "contents" : "##--------------------------------------Download the team gamelog--------------------------------------##\n##----------------------Environment Setting----------------------##\nsource(\"~/Documents/Sport_analysis/basketball//NBA_Prediction_Analysis//Setting_Packages.R\")\noptions(stringAsFactor = TRUE)\n##----------------------Season Setting----------------------##\nif(format(Sys.time(), \"%Y %m\")<paste(as.numeric(format(Sys.time(), \"%Y\")), \"11\") &\n     format(Sys.time(), \"%Y %m\")>paste(as.numeric(format(Sys.time(), \"%Y\")), \"05\") ){\n  Season <- seq(as.numeric(format(Sys.time(), \"%Y\"))-1, as.numeric(format(Sys.time(), \"%Y\"))-1)\n}else{\n  Season <- seq(as.numeric(format(Sys.time(), \"%Y\")), as.numeric(format(Sys.time(), \"%Y\")))\n}\n#Season <- seq(as.numeric(format(Sys.time(), \"%Y\"))-6, as.numeric(format(Sys.time(), \"%Y\"))-5)\nsystem.time(\n  for(s in 1:length(Season)){ \n    ##----------------------NBA_Team_Name----------------------##\n    season <- as.character(Season[s])\n    NBA_Team_Name <- read.xlsx(\"~/Documents/Sport_analysis/basketball//Team_Data//NBA_Team_Name.xlsx\", sheetName = season, \n                               header = TRUE)\n    Team_Short_Name <- as.character(NBA_Team_Name$Team_Short_Name)\n    for(t in 1:length(Team_Short_Name)){\n      Team_Name <- Team_Short_Name[t]\n      url <- sprintf(\"http://www.basketball-reference.com/teams/%s/%s/gamelog/\", Team_Name, season)\n      if(url.exists(url)){\n        Game_Info <- readHTMLTable(url)\n        Game_Log <- data.frame(Game_Info$tgl_basic)\n        Game_Log <- Game_Log[ , -c(1, 25)]\n        colnames(Game_Log) <- c(\"G\", \"Date\", \"H.A\", \"Opp\", \"W.L\", \"PTS\", \"Opp.PTS\", \"FG\", \"FGA\", \"FGP\", \"3P\", \"3PA\", \n                             \"3PP\", \"FT\", \"FTA\", \"FTP\", \"ORB\", \"TRB\", \"AST\", \"STL\", \"BLK\", \"TOV\", \"PF\",     \n                             \"Opp.FG\", \"Opp.FGA\", \"Opp.FGP\", \"Opp.3P\", \"Opp.3PA\", \"Opp.3PP\", \"Opp.FT\", \"Opp.FTA\", \"Opp.FTP\", \"Opp.ORB\", \n                             \"Opp.TRB\", \"Opp.AST\", \"Opp.STL\", \"Opp.BLK\", \"Opp.TOV\", \"Opp.PF\" )\n        Game_Log <- mutate(Game_Log, H.A=str_replace_all(H.A, \"\", \"H\"))  \n        Game_Log <- mutate(Game_Log, H.A=str_replace_all(H.A, \"H@H\", \"A\"))\n        Game_Log <- mutate(Game_Log, W.L=substr(W.L, 1, 1))\n        Game_Log <- Game_Log[!Game_Log$G==\"G\", ]\n        Game_Log <- Game_Log[!Game_Log$G==\"Team\", ]\n        Game_Log$Season <- with(Game_Log, season)\n      }\n    ##----------------------JSON FORM----------------------##\n    #file=sprintf(\"C://Users//user//Documents//My Dropbox//NBA_Code//NBA_Data//Team_Data//%s_%d.json\", Team_Short_Name[t], Season[s])\n    #Game_Log_Json=toJSON(Game_Log)\n    #writeLines(Game_Log_Json, file)\n    ##----------------------data.frame FORM----------------------##\n    file <- sprintf(\"~/Documents/Sport_analysis/basketball/Team_Data/%s/%s_%s.txt\", season,\n                    Team_Name, season)\n    write.table(Game_Log, file, col.names = TRUE, row.names = FALSE, sep = \"\\t\")\n    }\n  }\n)\n",
    "created" : 1430758872084.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1899963168",
    "id" : "825B1745",
    "lastKnownWriteTime" : 1430758979,
    "path" : "~/Documents/Sport_analysis/basketball/NBA_Prediction_Analysis/NBA_Team_Game_Log.R",
    "project_path" : "NBA_Team_Game_Log.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}